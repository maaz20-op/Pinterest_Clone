<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- Meta Tags for SEO -->
<meta name="description" content="MaazPins - Explore and share creative pins like images, designs, and ideas. Created by Maaz Javed.">
<meta name="keywords" content="Pinterest Clone, MaazPins, Creative Pins, Images, Inspiration, Maaz Javed">
<meta name="author" content="Maaz Javed">


  <title>ReelNest <%= user.fullname %> Profile</title>
 <link rel="icon" href="/images/uploads/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/stylesheets/profilePage.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">

</head>
<body>

  <%- include("partials/flash") %>
  <%- include("partials/header2") %>

  <!-- Profile Section -->
  <header class="profile-header">
    <div class="profileImage">
      <img src="<%= user.profileImage %>" alt="Profile" class="profile-pic" />
      <span class="editicon"><i class="fas fa-pencil-alt"></i></span>
    </div>
    <h1><%= user.fullname %></h1>
    <h1 class="username">@<%= user.username %></h1>
    
    
    <div class="containerFollowers">
  
  <a href="/showfollowers/<%= user._id %>" class="followers"> <span>Followers</span> <span class="count2">|&nbsp; <%= user.followers.length %> &nbsp;|</span></a>
  <a href="/showfollowing/<%= user._id %>" class="following"> <span>Following</span> <span class="count1">|&nbsp; <%= user.following.length %> &nbsp;|</span></a>
  
  
</div>
    
    
    <div class="containerBio"><p class="bio"><%= user.bio %></p><i class="showMore fa-solid fa-circle-chevron-down show-more-icon"></i></div>

    <!-- Profile Pic Upload Form -->
    <form class="editForm" hidden action="/users/editprofpic" method="post" enctype="multipart/form-data">
      <input type="file" name="profileImage" required />
      <button type="submit"></button>
    </form>


    <!-- showing follwers and follwing   -->






    <!-- Post Upload Form and accoubt settings  -->
    
  <div class="btn-action">
      <a href="/showaccountsettings" class="account-settings" type="submit">
        <p>Account Settings</p><i class="fas fa-cog"></i>
      </a>


      <a href="/createpost" class="create-post" type="submit">
        <p>Create Post</p> <i class="fas fa-upload"></i>
      </a>
      </div>
  </header>

  <div class="divider"></div>

  <!-- Pins Grid -->
  <h1 class="pin-heading">Your Pins:</h1>
  <section class="pin-section">
    <div class="pin">
      <img src="https://iili.io/Fnryyhb.jpg" alt="Coding Setup" />
      <a href="/showpins"><p class="category">Saved Posts <%= user.pins.length %></p></a>
    </div>
  </section>

  <h1 style="font-family: 'Montserrat', sans-serif;" class="your-img">Your Posts:</h1>
  <section class="masonry">
    <% if (user.post.length > 0) { %>
      <% user.post.reverse().forEach((eachPost) => { %>
        <div class="masonry-item">
          <img src="<%= eachPost.image %>" alt="" />
          <h2><%= eachPost.postdata %></h2>
        </div>
      <% }) %>
    <% } else { %>
      <h1 style="margin-left:2.3cm;margin-top:3cm;width:60vw;padding-bottom:2cm;font-size:18px;">No posts found...</h1>
    <% } %>
  </section>

  <script>
    // Edit Profile Pic
    document.querySelector(".editicon").addEventListener("click", function () {
      document.querySelector(".editForm input").click();
    });

    document.querySelector(".editForm input").addEventListener("change", function () {
      document.querySelector(".editForm").submit();
    });

let showMoreBtn = document.querySelector(".showMore");
let containerBio = document.querySelector(".containerBio");
let userDescription = document.querySelector(".bio");
let flag = true
showMoreBtn.addEventListener("click",function(){

if(flag){
  containerBio.style.cssText = "min-height:1vh"
  userDescription.classList.add("showText");
  showMoreBtn.classList.remove("fa-circle-chevron-down");
  showMoreBtn.classList.add("fa-circle-chevron-up");
   
  showMoreBtn.style.cssText = "bottom:0;left:288px"
  flag = false;
} else {
  containerBio.style.cssText = "min-height:2vh"

  showMoreBtn.classList.remove("fa-circle-chevron-up");
  showMoreBtn.classList.add("fa-circle-chevron-down");
userDescription.classList.remove("showText");
flag = true
}
})
  </script>
  
      <%- include("partials/footer") %>
  
</body>
</html>